# 제약(constraint)의 모델링
> 실세계를 올바르게 모델링 할 수 있도록 데이터베이스를 유지
* 제약은 스키마의 한 부분 : DB의 데이터는 제약을 항상 만족해야 한다
* 키(key) : 클래스내의 객체나 엔티티 집합내의 엔티티를 유일하게 구별할 수 있는 하나의 애트리뷰트나 애트리뷰트들의 집합
* 단일 값(single-value) 제약 : 특정한 역할을 하는 값이 유일해야 한다
* 참조 무결성(referential integrity) 제약 : 어떤 다른 객체에 의해 참조되는 값이 데이터베이스에 실제로 존재해야 한다
* 도메인(domain) 제약 : 애트리뷰트의 값이 특정 값의 집합에 속해야 한다
* 일반(general) 제약 : 데이터베이스에서 지켜져야 할 임의의 무결성 단정(assertion)을 말한다

<br>

### 키
> 키를 하나 이상의 애트리뷰트로 구성되는 집합 K라고 하면, 클래스(또는 엔티티 집합)의 두 객체 e1, e2는 키 K를 구성하는 애트리뷰트에 서로 같은 값을 가질 수 없다
* 성질 : 유일성(uniqueness)과 최소성(minimality)
* 키의 종류
  * 후보키(Candidate Key) : 여러 개의 가능한 키들 ex) 학생 클래스의 학번과 주민등록번호는 모두 후보키
  * 주키(Primary Key) : 후보키들중 주로 사용할 키를 선언함 ex) 학생 클래스에 대해서 학번을 주키로 사용
  * 수퍼키(Super Key) : 키의 성질중 최소성을 만족하지 않음
* 표현
  * 키에 속하는 애트리뷰트에 밑줄을 긋는다
  * E/R 모델은 키가 두개 이상 존재하는 것을 나타내는 표기법은 제공하지 않는다(주석 등으로 처리하기도 한다)

<br>

### 단일 값 제약
> 특정 역할에 하나의 값만 존재할 수 있다는 것도 데이터베이스 설계에서 중요한 특성
* 단일 값을 가지는 애트리뷰트에 대한 두 가지 경우
  * 애트리뷰트의 값이 반드시 존재해야 하는 경우(exactly one)
    * 키에 속하는 애트리뷰트
  * 애트리뷰트의 값이 있을 수도 있고 없을 수도 있는 경우(at most one)
    * 실제 값 대신에 널(null)값이 사용될 수도 있음
    * 널 값은 애트리뷰트에 대한 유효한 정보가 없을 때 사용 : Movie 객체에서 length 값을 모르는 경우 -1이나 NULL을 저장
* 단일 값 제약 표현
  * E/R 모델에서는, 각 애트리뷰트는 다른 표시가 없는 한 단일 값을 갖는다고 간주되며, 일반적으로 값이 널이 될 수 있다고 가정한다

<br>

### 참조 무결성
> 주어진 역할에 대해 정확하게 하나(exactly one)의 값이 존재해야 한다는 것
* 관계성에서 참조되어지는 객체나 엔티티는 반드시 존재해야 한다(허상(dangling) 포인터(이미 삭제된 객체에 대한 포인터)를 허용 안함)
* 참조 무결성 제약이 지켜지도록 하기 위한 방법
  * 참조되어지는 객체의 삭제를 금지
  * 참조되어지는 객체가 삭제되면 이 객체를 참조하고 있던 모든 객체도 같이 삭제
  * 참조하는 객체가 새로 만들어 지면, 기존에 존재하는 객체를 그 관계성의 값으로 가져야 한다
  * 관계성의 값이 변경되었을 때, 새로운 값은 반드시 이미 존재하는 객체이어야 한다 
* 표현
  * 둥근 화살표의 사용      
    * 참조 무결성 제약
    * 관계성은 다대일이나 일대일이다

<br>

### 그 밖에 다른 제약
* 도메인(domain)제약
  * 애트리뷰트의 값은 어떤 제한된 집합에 있는 것이어야 한다
    * ODL에서는 각 애트리뷰트의 타입을 지정해야 한다. 그리고 이 타입은 도메인 제약의 기본적인 형태이다
* 관계성의 차수(degree)에 대한 제약
  * 관계성에 참여하는 엔티티의 수를 제한한다
    * 화살표는 <strong>"<= 1"</strong>제약을 나타낸다
    * 참조 무결성은 <strong>"= 1"</strong>제약을 나타낸다
  * edge에 숫자를 기입하여 표시